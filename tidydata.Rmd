---
title: "tidy data"
author: "Yang Gao"
date: "9/30/2021"
output: github_document
---

```{r}
library(tidyverse) 
library(readxl)
library(haven)

options(tibble.print_min = 5)
```


```{r}
pulse_df = 
  haven::read_sas("./datasets/public_pulse_data.sas7bdat") %>%
  janitor::clean_names()

pulse_df

```

lets try pivot

```{r}
pivot_tidy=
  pulse_df %>% 
  pivot_longer (
    bdi_score_bl:bdi_score_12m,
    names_to = "visit",
    names_prefix = "bdi_score_",
    values_to = "bdi"
  ) %>% 
  mutate(
    visit = replace(visit, visit =="bl" , "00m"),
    visit=factor(visit)
  )

```






